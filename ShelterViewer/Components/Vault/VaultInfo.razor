
@inject Services.VaultService VaultService

<MudCard>
    <MudCardHeader>
        <CardHeaderContent>
            <MudText Align="Align.Center" Typo="Typo.h3">Vault @VaultService.VaultData!.Vault.VaultName</MudText>
        </CardHeaderContent>
        <CardHeaderActions>
            <MudTooltip Text="Unload Shelter">
                <MudIconButton Icon="@Icons.Material.Filled.Settings" Color="Color.Default" @onclick="@(() => UnloadVault?.Invoke())" />
            </MudTooltip>           
        </CardHeaderActions>
    </MudCardHeader>
    <MudCardContent>
        <MudText>Vault Mode: @VaultService.VaultData!.Vault.VaultMode</MudText>
        <MudText>Unopened Lunch Boxes: @VaultService.LunchBoxes</MudText>
        <MudText>Unopened Pet Carrier: @VaultService.PetCarriers</MudText>
        <MudText>Unopened Mr Handy: @VaultService.MrHandy</MudText>
    
        <MudText>Unopened Starter Pack: @VaultService.StarterPacks</MudText>
        <MudText>Stim Packs: @VaultService.VaultData!.Vault.storage.resources.StimPack</MudText>
        <MudText>RadAway: @VaultService.VaultData!.Vault.storage.resources.RadAway</MudText>
        <MudText>
            @{
                var resources = VaultService.VaultResources; 
            }
            <MudText>Food: @resources.Food.Level / @resources.Food.Max</MudText>
            <MudText>Energy: @resources.Energy.Level / @resources.Energy.Max</MudText>
            <MudText>Water: @resources.Water.Level / @resources.Water.Max</MudText>
        </MudText>
    </MudCardContent>
    
</MudCard>
@code {
    [Parameter, EditorRequired]
    public Action? UnloadVault { get; set; }

    protected override void OnInitialized()
    {
        VaultService.OnVaultChanged += OnVaultChanged;
    }

    private void OnVaultChanged()
    {
        StateHasChanged();
    }
}
